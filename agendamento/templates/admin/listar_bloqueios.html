{% extends "base.html" %}
{% block title %}Bloqueios da Agenda{% endblock %}

{% block content %}
<h3 class="text-center mb-4">
  <i class="bi bi-calendar-x me-2"></i>
  Bloqueios da Agenda
</h3>

<div class="text-end mb-3">
  <a href="{% url 'criar_bloqueio' %}" class="btn btn-danger">
    <i class="bi bi-plus-circle"></i> Novo bloqueio
  </a>
</div>

<table class="table table-striped table-bordered text-center">
  <thead class="table-dark">
    <tr>
      <th>Congregação</th>   {# <-- NOVO #}
      <th>Dia</th>
      <th>Início</th>
      <th>Fim</th>
      <th>Motivo</th>
      <th>Ações</th>
    </tr>
  </thead>

  <tbody>
    {% for b in bloqueios %}
    <tr>
      <td>{{ b.congregacao.nome }}</td>   {# <-- NOVO #}
      <td>{{ b.get_dia_semana_display }}</td>
      <td>{{ b.hora_inicio|time:"H:i" }}</td>
      <td>{{ b.hora_fim|time:"H:i" }}</td>
      <td>{{ b.motivo }}</td>

      <td>
        <a href="{% url 'editar_bloqueio' b.id %}" class="btn btn-warning btn-sm">
          <i class="bi bi-pencil"></i>
        </a>
        <a href="{% url 'excluir_bloqueio' b.id %}"
           class="btn btn-danger btn-sm"
           onclick="return confirm('Deseja remover este bloqueio?')">
          <i class="bi bi-trash"></i>
        </a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="6" class="text-muted">Nenhum bloqueio cadastrado</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
